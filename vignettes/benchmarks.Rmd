---
title: "Benchmarking results and comparision with other packages"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Benchmarking results and comparision with other packages}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(microbenchmark)
devtools::load_all()

set.seed(2022)
```

## Microbenchmarks for Development

### Scaling with network size

```{r}
Nsizes <- c(10,100,1000)
inputs <- lapply(Nsizes, function(dec) {
  g <- sample_ppm(dec, 0.3, 0.01, c(0.3*dec, 0.5*dec, 0.2*dec))
  p <- sample(c(rep(1,.3*dec), rep(2,.5*dec), rep(3,.2*dec)))
  E <- block_edge_counts(g, p)
  n <- block_node_counts(p)
  list('g' = g, 'p' = p, 'E' = E, 'n' = n)
})
```

#### Calculating node counts per block
```{r}
microbenchmark(
  block_node_counts(inputs[[1]]$p),
  block_node_counts(inputs[[2]]$p),
  block_node_counts(inputs[[3]]$p)
)
```

#### Calculating edge counts between blocks
```{r}
microbenchmark(
  block_edge_counts(inputs[[1]]$g, inputs[[1]]$p),
  block_edge_counts(inputs[[2]]$g, inputs[[2]]$p),
  block_edge_counts(inputs[[3]]$g, inputs[[3]]$p)
)
```


#### Calculating traditional undirected entropy
```{r}
microbenchmark(
  entropy_undirected_trad(inputs[[1]]$E, inputs[[1]]$n),
  entropy_undirected_trad(inputs[[2]]$E, inputs[[2]]$n),
  entropy_undirected_trad(inputs[[3]]$E, inputs[[3]]$n)
)
```
